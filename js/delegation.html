<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
     <!--
    <ul id="todo-list">
        <li data-id="1">React 공부하기</li>
        <li data-id="2">Java 과제하기</li>
        <li data-id="3">운동하기</li>
    </ul>
    -->

    <!-- 실제 서비스에서는 li 안에 버튼, 아이콘 등이 섞여있을 떄가 더 많다. -->
    <ul id="todo-list">
        <li data-id="1">
            <span class="text">React 공부하기</span>
            <button class="delete-btn">삭제</button>
        </li>
    </ul>

    <script>
        // querySelector() : 해당되는 태그들을 모아서 htmlcollection
        //const items = document.querySelectorAll("#todo-list li");
        
        // forEach를 이용해 각각의 요소를 순회하는 것이 가능하다.
        //items.forEach((item) => {
        //    item.addEventListener("click", function(){
        //        console.log(item.textContent + '클릭됨')
        //    });
        // });
        // 각각의 요소에게 이벤트를 달아주는 것은 비효율적이다.
        // 아래 방식이 효율적.
        // const todoList = document.querySelector("#todo-list");
        
        //todoList.addEventListener('click', function(event){
            // 실제로 클릭된 요소
        //    const target = event.target;

        //    if(target.tagName === 'LI'){
        //        const id = target.dataset.id; // data-id의 값
        //        const text = target.textContent; // 항목 내용
                
        //        console.log(`ID : ${id}, 내용 : ${text} 클릭됨`)
        //    }
        // });

        // ul에 이벤트 리스너 한개만 있다.
        // li가 3개든 100든 나중에 js를 이용해서 추가하든 코드의 수정없이 그냥 동작을 한다.
        // 유지보수, 성능 면에서 훨씬 좋다.

        const todoList2 = document.querySelector('#todo-list');

        todoList2.addEventListener('click', function(event){
            // li를 기준으로 가장 가까운 조상 찾기
            // 사용자가 클릭하는 위치가 다양하다.
            // 무슨 태그든 상관없이 그 요소가 속한 li를 찾는다.
            const li = event.target.closest('li');
            // ul 영역 바깥을 클릭한 경우를 방어
            // !todoList2.contains(li) : li를 찾긴 했는데, 그 li가 현재 ul내부가 아닌경우
            if(!li || !todoList2.contains(li)) return;

            const id =li.dataset.id; // <li data-id="10">처럼 HTML에서 설정한 값을 불러온다.

            // 삭제 버튼을 눌렀는지 판별
            if(event.target.matches('.delete-btn')){
                console.log(`ID ${id} 항목 삭제`);
                li.remove();
                return;
            }
        });
    </script>
</body>
</html>