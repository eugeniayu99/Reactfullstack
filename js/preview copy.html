<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- 실시간 검색어 미리보기 
     1. 검색어 input에 글자를 입력하면 아래에 "실시간 미리보기"를 준다.
     2. 아래에 최근 검색어 목록이 있고, 항목을 클릭하면 input에 해당 검색어가 다시 채워진다.
     3. 최근 검색어 리스트는 나중에 동적으로 계속 추가되지만, 이벤트는 한번만 걸고싶다. -->
     <input type="text" id="search-input" placeholder="검색어를 입력하세요.">
     <p id="preview">검색어 미리보기 : (없음)</p>

     <h3>최근 검색어</h3>
     <ul id="recent-list">
        <!-- 예 : <li>React</li> 이런 형태로 계속 추가된다고 가정 -->
     </ul>

     <button id="add-recent">현재 검색어를 최근 검색어 추가</button>


     <script>
        const searchInput = document.querySelector('#search-input');
        const preview = document.querySelector('#preview');
        const recentList = document.querySelector('#recent-list');
        const addRecentBtn = document.querySelector('#add-recent');

        // 미리보기 업데이트 함수
        function updatePreview(text) {
            if (text.trim() === '') {
                preview.textContent = '검색어 미리보기 : (없음)';
            } else {
                preview.textContent = `검색어 미리보기 : ${text}`;
            }
        }

        // 1. input에 글자 입력될 때마다 미리보기 변경
        searchInput.addEventListener('input', function () {
            const value = searchInput.value;
            updatePreview(value);
        });

        // 2. 현재 검색어를 '최근 검색어'에 추가
        addRecentBtn.addEventListener('click', function () {
            const value = searchInput.value.trim();

            if (value === '') {
                alert('검색어를 먼저 입력해 주세요!');
                return;
            }

            const li = document.createElement('li');
            li.textContent = value;

            // 필요하면 data-id, data-keyword 이런 것도 달 수 있음
            // li.dataset.keyword = value; 

            recentList.appendChild(li);
        });

        // 3. "최근 검색어" 리스트에 이벤트 한 번만 걸기 (이벤트 위임)
        recentList.addEventListener('click', function (event) {
            const target = event.target;

            // 실제로 클릭된 요소가 li인지 확인
            if (target.tagName === 'LI') {
                const text = target.textContent;

                // 클릭한 검색어를 input에 채우기
                searchInput.value = text;

                // 미리보기도 해당 검색어로 변경
                updatePreview(text);
            }
        });
    </script>
</body>
</html>